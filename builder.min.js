var builder=function(e){"use strict";const t={scale:1,offset:{x:0,y:0},isSelecting:!1,selectionStart:{x:0,y:0},selectionEnd:{x:0,y:0},isJoining:!1,joinStart:{x:0,y:0},joinEnd:{x:0,y:0},joinStartId:null,joinEndId:null};function n(e){t.offset=e}function i(e){t.isSelecting=e}function o(e){t.selectionEnd=e}function s(e){t.isJoining=e}function l(e){t.joinEnd=e}function d(e){t.joinStartId=e}function a(e){t.joinEndId=e}let c={nodes:[{id:1,position:{x:100,y:100},size:{width:80,height:40},selected:!1,pinned:!1,type:"httpEndpoint",name:"Http Endpoint",outputPins:[{id:85,value:2,type:"number"}],parameters:[{fieldType:"select",id:"httpMethod",label:"HTTP Method",name:"httpMethod",options:[{label:"Select an HTTP method",value:""},{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}],required:!0,value:"GET"},{fieldType:"input",id:"urlPath",label:"URL Path",name:"urlPath",placeholder:"Enter the URL path",required:!0,value:"/auth/{{provider}}/start"}]},{id:2,position:{x:200,y:200},size:{width:80,height:40},selected:!1,pinned:!1,type:"input",name:"Input",outputPins:[{id:86,value:10,type:"number"}]},{id:3,position:{x:300,y:300},size:{width:80,height:40},selected:!1,pinned:!1,type:"function",name:"Multiply",functionId:"sd78f979f8ds",inputPins:[{id:87,type:"number"},{id:88,type:"number"}],outputPins:[{id:89,value:10,type:"number"},{id:810,value:10,type:"error"}],solved:!0},{id:5,position:{x:400,y:400},size:{width:80,height:40},selected:!1,pinned:!1,type:"output",name:"Output",inputPins:[{id:811,type:"error"}]},{id:4,position:{x:400,y:400},size:{width:80,height:40},selected:!1,pinned:!1,type:"error",name:"Error",inputPins:[{id:812,type:"number"}]}],edges:[{start:85,end:87,selected:!0},{start:86,end:88,selected:!1},{start:89,end:811,selected:!1},{start:810,end:812,selected:!1}],solved:!0},r=[JSON.stringify(c)],f=0;function h(){!function(){const e=document.getElementById("parameters");if(!e)return;e.innerHTML="";const t=c.nodes.find((e=>e.selected&&e.parameters));if(t&&t.parameters){e.style.display="block";const n=document.createElement("form");t.parameters.forEach((e=>{var i;const o=document.createElement("label");let s;o.textContent=e.label,o.htmlFor=e.id,"select"===e.fieldType?(s=document.createElement("select"),null===(i=e.options)||void 0===i||i.forEach((t=>{const n=document.createElement("option");n.value=t.value,n.textContent=t.label,n.selected=t.value===e.value,s.appendChild(n)}))):(s=document.createElement("input"),s.type="input"===e.fieldType?"text":e.fieldType,"checkbox"===e.fieldType||"radio"===e.fieldType?s.checked="true"===e.value:s.value=e.value||""),s.id=e.id,s.name=e.name,s.onchange=n=>{var i;const o=n.target;let s;s="checkbox"===o.type?o.checked?"true":"false":o.value;const l=null===(i=t.parameters)||void 0===i?void 0:i.find((t=>t.id===e.id));l&&(l.value=s),h()},n.appendChild(o),n.appendChild(s)})),e.appendChild(n)}else e.style.display="none"}();const e=JSON.stringify(c);r[f]!==e&&(f<r.length-1&&(r=r.slice(0,f+1)),r.push(e),r.length>50?r.shift():f++)}function u(){f<r.length-1&&(f++,c=JSON.parse(r[f]))}const p=10,y=5;function x(e,t,n){var i,o;const s=[],l=p*t,d=l/2,a=y*t,c=null!==(i=e.outputPins)&&void 0!==i?i:[];let r=e.position.x*t+n.x+(e.size.width*t-(c.length*l+(c.length-1)*a))/2+d;c.forEach((i=>{s.push({id:i.id,type:"output",position:{x:r,y:e.position.y*t+n.y+e.size.height*t+d+5*t}}),r+=l+a}));const f=null!==(o=e.inputPins)&&void 0!==o?o:[];let h=e.position.x*t+n.x+(e.size.width*t-(f.length*l+(f.length-1)*a))/2+d;return f.forEach(((i,o)=>{s.push({id:i.id,type:"input",position:{x:h,y:e.position.y*t+n.y-d-5*t}}),h+=l+a})),s}function g(e,n,i,o,s){const{scale:l,offset:d}=t;e.strokeStyle=o,e.lineWidth=s;const a=i*l,c=d.x%a-a,r=d.y%a-a,f=n.width,h=n.height;for(let t=c;t<f;t+=a)e.beginPath(),e.moveTo(t,0),e.lineTo(t,h),e.stroke();for(let t=r;t<h;t+=a)e.beginPath(),e.moveTo(0,t),e.lineTo(f,t),e.stroke()}function w(e,n,i){const{isSelecting:o,isJoining:s,joinStart:l,joinEnd:d}=t,a=e.getContext("2d"),r=n.getContext("2d"),f=i.getContext("2d");if(!a||!r||!f)throw new Error("Canvas not supported");a.clearRect(0,0,e.width,e.height),r.clearRect(0,0,n.width,n.height),function(e,t){e.fillStyle="#262626",e.fillRect(0,0,t.width,t.height),g(e,t,20,"#353535",1),g(e,t,200,"#161616",2)}(f,i),function(e){const{scale:n,offset:i}=t;c.nodes.forEach((t=>{const o=4*n,{x:s,y:l,width:d,height:a}={x:t.position.x*n+i.x,y:t.position.y*n+i.y,width:t.size.width*n,height:t.size.height*n};e.shadowColor="rgba(0, 0, 0, 0.3)",e.shadowBlur=8,e.shadowOffsetX=4,e.shadowOffsetY=4,e.beginPath(),e.moveTo(s+o,l),e.lineTo(s+d-o,l),e.quadraticCurveTo(s+d,l,s+d,l+o),e.lineTo(s+d,l+a-o),e.quadraticCurveTo(s+d,l+a,s+d-o,l+a),e.lineTo(s+o,l+a),e.quadraticCurveTo(s,l+a,s,l+a-o),e.lineTo(s,l+o),e.quadraticCurveTo(s,l,s+o,l),e.closePath(),e.fillStyle="rgba(133, 133, 133, 0.7)",e.fill(),e.fillStyle="rgba(255, 255, 255, 0.5)",e.font=14*n+"px Arial";const c=s+d+10,r=l+a/2+5;e.fillText(t.name,c,r),t.selected&&(e.strokeStyle="gold",e.lineWidth=2.5*n,e.stroke()),x(t,n,i).forEach((({id:t,type:i,position:o})=>{const s=p/2*n;e.beginPath(),e.arc(o.x,o.y,s,0,2*Math.PI),e.fillStyle="grey",e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowBlur=5,e.shadowOffsetX=2,e.shadowOffsetY=2,e.fill(),e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.beginPath();const l=.4*s;e.arc(o.x,o.y,l,0,2*Math.PI),e.fillStyle="rgba(0, 0, 0, 0.7)",e.fill()})),e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}))}(r),function(e){const{scale:n,offset:i}=t;e.lineWidth=2.5*n,e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowBlur=10*n,e.shadowOffsetX=5*n,e.shadowOffsetY=5*n,e.lineCap="round",c.edges.forEach((t=>{const o=c.nodes.find((e=>{var n;return null===(n=e.outputPins)||void 0===n?void 0:n.some((e=>e.id===t.start))})),s=c.nodes.find((e=>{var n;return null===(n=e.inputPins)||void 0===n?void 0:n.some((e=>e.id===t.end))}));if(!(o&&s&&o.outputPins&&s.inputPins))return;const l=o.outputPins.find((e=>e.id===t.start)),d=s.inputPins.find((e=>e.id===t.end));if(!l||!d)return;"error"===l.type?e.strokeStyle=t.selected?"gold":"#D04545":e.strokeStyle=t.selected?"gold":"#4181DC";const a=p*n,r=a/2,f=y*n,h=o.outputPins.indexOf(l),u=s.inputPins.indexOf(d),x=o.position.x*n+i.x+(o.size.width*n-(o.outputPins.length*a+(o.outputPins.length-1)*f))/2+h*(a+f)+r,g=o.position.y*n+i.y+o.size.height*n+r+5*n,w=s.position.x*n+i.x+(s.size.width*n-(s.inputPins.length*a+(s.inputPins.length-1)*f))/2+u*(a+f)+r,m=s.position.y*n+i.y-r-5*n,v=w-x,E=m-g,b=Math.sqrt(v*v+E*E)/3,T=x+v/3,M=g+(E<0?-1:1)*b,P=w-v/3,S=m-(E<0?-1:1)*b;e.beginPath(),e.moveTo(x,g),e.bezierCurveTo(T,M,P,S,w,m),e.stroke()})),e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.lineCap="butt"}(r),o&&function(e){const{scale:n,offset:i,selectionEnd:o,selectionStart:s}=t,l=Math.min(s.x,o.x)*n+i.x,d=Math.min(s.y,o.y)*n+i.y,a=Math.abs(o.x-s.x)*n,c=Math.abs(o.y-s.y)*n;e.save(),e.setLineDash([5,3]),e.strokeStyle="white",e.lineWidth=1,e.beginPath(),e.rect(l,d,a,c),e.stroke(),e.restore()}(a),s&&l&&d&&function(e,t,n,i,o){const s=t.x*i+o.x,l=t.y*i+o.y,d=n.x*i+o.x,a=n.y*i+o.y,c=d-s,r=a-l,f=Math.sqrt(c*c+r*r)/3,h=s+c/3,u=l+(r<0?-1:1)*f,p=d-c/3,y=a-(r<0?-1:1)*f;e.beginPath(),e.moveTo(s,l),e.bezierCurveTo(h,u,p,y,d,a),e.strokeStyle="gold",e.stroke()}(r,l,d,t.scale,t.offset)}let m=null;const v=document.getElementById("topCanvas"),E=document.getElementById("mainCanvas"),b=document.getElementById("backgroundCanvas");function T(){null!==m&&cancelAnimationFrame(m);const e=()=>{w(v,E,b),m=requestAnimationFrame(e)};e()}let M={x:0,y:0},P=!1,S={x:0,y:0};function C(e,t,n){const i=Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2);if(0===i)return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));let o=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;o=Math.max(0,Math.min(1,o));const s=t.x+o*(n.x-t.x),l=t.y+o*(n.y-t.y);return Math.sqrt(Math.pow(e.x-s,2)+Math.pow(e.y-l,2))}function Y(e,n){const{scale:i,offset:o}=t;let s=!1;const l={x:e*i+o.x,y:n*i+o.y};return c.nodes.forEach((e=>e.selected=!1)),c.edges.forEach((e=>e.selected=!1)),c.edges.forEach((e=>{const t=c.nodes.flatMap((e=>x(e,i,o))).find((t=>t.id===e.start)),n=c.nodes.flatMap((e=>x(e,i,o))).find((t=>t.id===e.end));if(!t||!n)return;const d=n.position.x-t.position.x,a=n.position.y-t.position.y,r=Math.sqrt(d*d+a*a)/3,f={x:t.position.x+d/3,y:t.position.y+(a<0?-1:1)*r},h={x:n.position.x-d/3,y:n.position.y-(a<0?-1:1)*r},u=function(e,t,n,i,o){const s=[];for(let l=0;l<=o;l++){const d=l/o,a=Math.pow(1-d,3)*e.x+3*Math.pow(1-d,2)*d*t.x+3*(1-d)*Math.pow(d,2)*n.x+Math.pow(d,3)*i.x,c=Math.pow(1-d,3)*e.y+3*Math.pow(1-d,2)*d*t.y+3*(1-d)*Math.pow(d,2)*n.y+Math.pow(d,3)*i.y;s.push({x:a,y:c})}return s}(t.position,f,h,n.position,20);for(let t=0;t<u.length-1;t++){if(C(l,u[t],u[t+1])<7*i){s=!0,e.selected=!e.selected;break}}})),s}function k(e,i){const{scale:o,offset:s}=t;let l,d;if(e instanceof WheelEvent){const t=e;t.preventDefault();const n=t.clientX-v.getBoundingClientRect().left,o=t.clientY-v.getBoundingClientRect().top,s=-1*t.deltaY/50;d=Math.exp(.05*s),i={x:n,y:o}}else d=e;if(l=Math.min(Math.max(o*d,.6),2),i){n({x:(s.x-i.x)*(l/o)+i.x,y:(s.y-i.y)*(l/o)+i.y})}!function(e){t.scale=e}(l),T()}function X(e,n){const{scale:i,offset:o}=t;let s=!1;return c.nodes.forEach((t=>{x(t,i,o).forEach((t=>{const l=e*i+o.x,d=n*i+o.y,a=l-t.position.x,r=d-t.position.y;if(Math.sqrt(a*a+r*r)<p*i){c.edges.some((e=>e.start===t.id||e.end===t.id))||(s={position:{x:(t.position.x-o.x)/i,y:(t.position.y-o.y)/i},id:t.id},c.nodes.forEach((e=>e.selected=!1)),c.edges.forEach((e=>e.selected=!1)),"output"===t.type?c.edges.filter((e=>e.start===t.id)).forEach((e=>e.selected=!0)):c.edges.filter((e=>e.end===t.id)).forEach((e=>e.selected=!0)))}}))})),s}v.addEventListener("mousedown",(function(e){const{scale:n,offset:a}=t;e.preventDefault(),S.x=e.clientX,S.y=e.clientY,P=!1;const r=(e.clientX-v.offsetLeft-a.x)/n,f=(e.clientY-v.offsetTop-a.y)/n;let h=!1;c.nodes.forEach((t=>{r>=t.position.x&&r<=t.position.x+t.size.width&&f>=t.position.y&&f<=t.position.y+t.size.height&&(h=!0,c.edges.forEach((e=>e.selected=!1)),e.shiftKey?t.selected=!t.selected:t.selected||(c.nodes.forEach((e=>e.selected=!1)),t.selected=!0))}));let u=X(r,f);if(!h&&!u){if(X(r,f))return void T();if(Y(r,f))return void T()}var p,y;0!==e.button||e.shiftKey||h||u||(c.nodes.forEach((e=>e.selected=!1)),c.edges.forEach((e=>e.selected=!1)),i(!0),p={x:r,y:f},t.selectionStart=p,o({x:r,y:f})),0!==e.button||e.shiftKey||h||!u||(s(!0),y=u.position,t.joinStart=y,d(u.id),l({x:r,y:f})),(2===e.button||0===e.button&&e.ctrlKey)&&(M.x=e.clientX-a.x,M.y=e.clientY-a.y,P=!0),T()})),v.addEventListener("mousemove",j((function(e){const{scale:i,offset:s,isSelecting:d,isJoining:a}=t;if(1===e.buttons&&!P){const t=(e.clientX-S.x)/i,n=(e.clientY-S.y)/i;(Math.abs(t)>5||Math.abs(n)>5)&&(c.nodes.forEach((e=>{e.selected&&(e.position.x+=t,e.position.y+=n)})),S.x=e.clientX,S.y=e.clientY,T())}if(2===e.buttons||1===e.buttons&&e.ctrlKey){n({x:e.clientX-M.x,y:e.clientY-M.y}),T()}if(d){o({x:(e.clientX-v.offsetLeft-s.x)/i,y:(e.clientY-v.offsetTop-s.y)/i}),T()}if(a){l({x:(e.clientX-v.offsetLeft-s.x)/i,y:(e.clientY-v.offsetTop-s.y)/i}),T()}}),16.67)),v.addEventListener("mouseup",(function(e){const{scale:n,offset:o,isSelecting:l,selectionEnd:r,selectionStart:f,isJoining:u,joinEnd:p}=t;if(P=!1,l){const e={x:f.x*n+o.x,y:f.y*n+o.y},t={x:r.x*n+o.x,y:r.y*n+o.y},s={left:Math.min(e.x,t.x),right:Math.max(e.x,t.x),top:Math.min(e.y,t.y),bottom:Math.max(e.y,t.y)};c.nodes.forEach((e=>{const t=e.position.x*n+o.x,i=e.position.y*n+o.y,l=e.size.width*n,d=e.size.height*n;t+l>s.left&&t<s.right&&i+d>s.top&&i<s.bottom&&(e.selected=!0)})),i(!1)}if(u){const e=X(p.x,p.y);e?a(e.id):(d(null),a(null)),e&&null!==t.joinStartId&&null!==t.joinEndId&&t.joinStartId!==t.joinEndId&&c.edges.push({start:t.joinStartId,end:t.joinEndId,selected:!0}),s(!1)}h(),T()})),v.addEventListener("contextmenu",(function(e){e.preventDefault()})),document.addEventListener("keydown",(function(e){if("Delete"===e.key||"Backspace"===e.key){const e=document.activeElement,t=null==e?void 0:e.tagName.toLowerCase();if("input"!==t&&"textarea"!==t){let e=!1;c.nodes.some((e=>e.selected))&&(c.nodes=c.nodes.filter((e=>!e.selected)),e=!0),e||(c.edges=c.edges.filter((e=>!e.selected))),h(),T()}}"z"!==e.key&&"Z"!==e.key||!e.ctrlKey&&!e.metaKey?"y"!==e.key&&"Y"!==e.key||!e.ctrlKey&&!e.metaKey||(e.preventDefault(),u(),T()):(e.preventDefault(),e.shiftKey?u():f>0&&(f--,c=JSON.parse(r[f])),T())}));const z=j(k,16.67);function L(){v.width=window.innerWidth,v.height=window.innerHeight,E.width=window.innerWidth,E.height=window.innerHeight,b.width=window.innerWidth,b.height=window.innerHeight,T()}v.addEventListener("wheel",z),document.addEventListener("dataChanged",(()=>{T()}));const O=j(L,16.67);function j(e,t){let n=!1;return(...i)=>{n||(e(...i),n=!0,setTimeout((()=>{n=!1}),t))}}window.addEventListener("resize",O),L(),T(),v.addEventListener("touchstart",(function(e){e.preventDefault();const n=e.touches[0];if(q=Date.now(),B={x:n.clientX,y:n.clientY},1===e.touches.length){M.x=n.clientX-t.offset.x,M.y=n.clientY-t.offset.y,P=!1;const{scale:e,offset:i}=t,o=(n.clientX-v.offsetLeft-i.x)/e,s=(n.clientY-v.offsetTop-i.y)/e;let l=null;c.nodes.forEach((e=>{o>=e.position.x&&o<=e.position.x+e.size.width&&s>=e.position.y&&s<=e.position.y+e.size.height&&(l=e)})),l?K=setTimeout((()=>{J=!0,H=l,P=!1}),200):P=!0}else 2===e.touches.length&&clearTimeout(K)}),!1),v.addEventListener("touchmove",(function(e){if(e.preventDefault(),2===e.touches.length){const t=e.touches[0],n=e.touches[1],i=function(e,t){const n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)}(t,n),o=i/I;if(!isNaN(o)&&o!==1/0&&I>0){const e=(t.clientX+n.clientX)/2,i=(t.clientY+n.clientY)/2;D={x:e,y:i},k(o,D)}I=i}else if(J&&H){const n=e.touches[0],{scale:i,offset:o}=t,s=(n.clientX-v.offsetLeft-o.x)/i,l=(n.clientY-v.offsetTop-o.y)/i;H.position.x=s,H.position.y=l,T()}else if(1===e.touches.length&&P){const t=e.touches[0];n({x:t.clientX-M.x,y:t.clientY-M.y}),T()}}),!1),v.addEventListener("touchend",(function(e){if(clearTimeout(K),!J){const n=Date.now()-q,i=e.changedTouches[0],o=Math.sqrt(Math.pow(i.clientX-B.x,2)+Math.pow(i.clientY-B.y,2));n<N&&o<W&&function(e,n){const{scale:i,offset:o}=t,s=(e-v.offsetLeft-o.x)/i,l=(n-v.offsetTop-o.y)/i;let d=!1;if(c.nodes.forEach((e=>{s>=e.position.x&&s<=e.position.x+e.size.width&&l>=e.position.y&&l<=e.position.y+e.size.height&&(c.nodes.forEach((e=>e.selected=!1)),e.selected=!0,d=!0)})),!d){!1!==X(s,l)&&(d=!0)}if(!d){Y(s,l)&&(d=!0)}T()}(i.clientX,i.clientY)}J=!1,H=null,P=!1,I=0,T()}),!1);let I=0,D={x:0,y:0};let q=0,B={x:0,y:0},K=null,J=!1;const N=200,W=10;let H=null;return e.drawNow=T,e.stopDrawing=function(){null!==m&&(cancelAnimationFrame(m),m=null)},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=builder.min.js.map
