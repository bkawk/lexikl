var builder=function(e){"use strict";const t={scale:1,offset:{x:0,y:0},isSelecting:!1,selectionStart:{x:0,y:0},selectionEnd:{x:0,y:0},isJoining:!1,joinStart:{x:0,y:0},joinEnd:{x:0,y:0},joinStartId:null,joinEndId:null};function n(e){t.offset=e}function i(e){t.isSelecting=e}function o(e){t.selectionEnd=e}function s(e){t.isJoining=e}function d(e){t.joinEnd=e}function l(e){t.joinStartId=e}function a(e){t.joinEndId=e}let r={nodes:[{id:1,position:{x:100,y:100},size:{width:80,height:40},selected:!1,pinned:!1,type:"input",name:"Input",outputPins:[{id:85,value:2,type:"number"}],parameters:[{fieldType:"input",id:"endpoint",label:"Endpoint",name:"endpoint",placeholder:"Enter the endpoint name",required:!0,value:""},{fieldType:"select",id:"httpMethod",label:"HTTP Method",name:"httpMethod",options:[{label:"Select an HTTP method",value:""},{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}],required:!0,value:""},{fieldType:"input",id:"urlPath",label:"URL Path",name:"urlPath",placeholder:"Enter the URL path",required:!0,value:""}]},{id:2,position:{x:200,y:200},size:{width:80,height:40},selected:!1,pinned:!1,type:"input",name:"Input",outputPins:[{id:86,value:10,type:"number"}]},{id:3,position:{x:300,y:300},size:{width:80,height:40},selected:!1,pinned:!1,type:"function",name:"Multiply",functionId:"sd78f979f8ds",inputPins:[{id:87,type:"number"},{id:88,type:"number"}],outputPins:[{id:89,value:10,type:"number"},{id:810,value:10,type:"error"}],solved:!0},{id:5,position:{x:400,y:400},size:{width:80,height:40},selected:!1,pinned:!1,type:"output",name:"Output",inputPins:[{id:811,type:"error"}]},{id:4,position:{x:400,y:400},size:{width:80,height:40},selected:!1,pinned:!1,type:"error",name:"Error",inputPins:[{id:812,type:"number"}]}],edges:[{start:85,end:87,selected:!0},{start:86,end:88,selected:!1},{start:89,end:811,selected:!1},{start:810,end:812,selected:!1}],solved:!0},c=[JSON.stringify(r)],h=0;function u(e){e.stopPropagation()}function f(){!function(){const e=document.getElementById("parameters");if(!e)return;e.innerHTML="";const t=r.nodes.find((e=>e.selected));if(t&&t.parameters){const n=document.createElement("form");n.addEventListener("click",u),n.addEventListener("mousedown",u),n.addEventListener("mouseup",u),t.parameters.forEach((e=>{var t;const i=document.createElement("label");let o;i.textContent=e.label,i.htmlFor=e.id,"select"===e.fieldType?(o=document.createElement("select"),null===(t=e.options)||void 0===t||t.forEach((e=>{const t=document.createElement("option");t.value=e.value,t.textContent=e.label,o.appendChild(t)}))):(o=document.createElement("input"),o.type="text",o.placeholder=e.placeholder||""),o.value=e.value||"",o.id=e.id,o.name=e.name,["click","mousedown","mouseup"].forEach((e=>{o.addEventListener(e,u)})),n.appendChild(i),n.appendChild(o)})),e.appendChild(n)}}();const e=JSON.stringify(r);c[h]!==e&&(h<c.length-1&&(c=c.slice(0,h+1)),c.push(e),c.length>50?c.shift():h++)}function p(){h<c.length-1&&(h++,r=JSON.parse(c[h]))}const y=10,x=5;function g(e,t,n){var i,o;const s=[],d=y*t,l=d/2,a=x*t,r=null!==(i=e.outputPins)&&void 0!==i?i:[];let c=e.position.x*t+n.x+(e.size.width*t-(r.length*d+(r.length-1)*a))/2+l;r.forEach((i=>{s.push({id:i.id,type:"output",position:{x:c,y:e.position.y*t+n.y+e.size.height*t+l+5*t}}),c+=d+a}));const h=null!==(o=e.inputPins)&&void 0!==o?o:[];let u=e.position.x*t+n.x+(e.size.width*t-(h.length*d+(h.length-1)*a))/2+l;return h.forEach(((i,o)=>{s.push({id:i.id,type:"input",position:{x:u,y:e.position.y*t+n.y-l-5*t}}),u+=d+a})),s}function m(e,n,i,o,s){const{scale:d,offset:l}=t;e.strokeStyle=o,e.lineWidth=s;const a=i*d,r=l.x%a-a,c=l.y%a-a,h=n.width,u=n.height;for(let t=r;t<h;t+=a)e.beginPath(),e.moveTo(t,0),e.lineTo(t,u),e.stroke();for(let t=c;t<u;t+=a)e.beginPath(),e.moveTo(0,t),e.lineTo(h,t),e.stroke()}function w(e,n,i){const{isSelecting:o,isJoining:s,joinStart:d,joinEnd:l}=t,a=e.getContext("2d"),c=n.getContext("2d"),h=i.getContext("2d");if(!a||!c||!h)throw new Error("Canvas not supported");a.clearRect(0,0,e.width,e.height),c.clearRect(0,0,n.width,n.height),function(e,t){e.fillStyle="#262626",e.fillRect(0,0,t.width,t.height),m(e,t,20,"#353535",1),m(e,t,200,"#161616",2)}(h,i),function(e){const{scale:n,offset:i}=t;r.nodes.forEach((t=>{const o=4*n,{x:s,y:d,width:l,height:a}={x:t.position.x*n+i.x,y:t.position.y*n+i.y,width:t.size.width*n,height:t.size.height*n};e.shadowColor="rgba(0, 0, 0, 0.3)",e.shadowBlur=8,e.shadowOffsetX=4,e.shadowOffsetY=4,e.beginPath(),e.moveTo(s+o,d),e.lineTo(s+l-o,d),e.quadraticCurveTo(s+l,d,s+l,d+o),e.lineTo(s+l,d+a-o),e.quadraticCurveTo(s+l,d+a,s+l-o,d+a),e.lineTo(s+o,d+a),e.quadraticCurveTo(s,d+a,s,d+a-o),e.lineTo(s,d+o),e.quadraticCurveTo(s,d,s+o,d),e.closePath(),e.fillStyle="rgba(133, 133, 133, 0.7)",e.fill(),e.fillStyle="rgba(255, 255, 255, 0.5)",e.font=14*n+"px Arial";const r=s+l+10,c=d+a/2+5;e.fillText(t.name,r,c),t.selected&&(e.strokeStyle="gold",e.lineWidth=2.5*n,e.stroke()),g(t,n,i).forEach((({id:t,type:i,position:o})=>{const s=y/2*n;e.beginPath(),e.arc(o.x,o.y,s,0,2*Math.PI),e.fillStyle="grey",e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowBlur=5,e.shadowOffsetX=2,e.shadowOffsetY=2,e.fill(),e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.beginPath();const d=.4*s;e.arc(o.x,o.y,d,0,2*Math.PI),e.fillStyle="rgba(0, 0, 0, 0.7)",e.fill()})),e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}))}(c),function(e){const{scale:n,offset:i}=t;e.lineWidth=2.5*n,e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowBlur=10*n,e.shadowOffsetX=5*n,e.shadowOffsetY=5*n,e.lineCap="round",r.edges.forEach((t=>{const o=r.nodes.find((e=>{var n;return null===(n=e.outputPins)||void 0===n?void 0:n.some((e=>e.id===t.start))})),s=r.nodes.find((e=>{var n;return null===(n=e.inputPins)||void 0===n?void 0:n.some((e=>e.id===t.end))}));if(!(o&&s&&o.outputPins&&s.inputPins))return;const d=o.outputPins.find((e=>e.id===t.start)),l=s.inputPins.find((e=>e.id===t.end));if(!d||!l)return;"error"===d.type?e.strokeStyle=t.selected?"gold":"#D04545":e.strokeStyle=t.selected?"gold":"#4181DC";const a=y*n,c=a/2,h=x*n,u=o.outputPins.indexOf(d),f=s.inputPins.indexOf(l),p=o.position.x*n+i.x+(o.size.width*n-(o.outputPins.length*a+(o.outputPins.length-1)*h))/2+u*(a+h)+c,g=o.position.y*n+i.y+o.size.height*n+c+5*n,m=s.position.x*n+i.x+(s.size.width*n-(s.inputPins.length*a+(s.inputPins.length-1)*h))/2+f*(a+h)+c,w=s.position.y*n+i.y-c-5*n,E=m-p,v=w-g,b=Math.sqrt(E*E+v*v)/3,M=p+E/3,P=g+(v<0?-1:1)*b,T=m-E/3,S=w-(v<0?-1:1)*b;e.beginPath(),e.moveTo(p,g),e.bezierCurveTo(M,P,T,S,m,w),e.stroke()})),e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.lineCap="butt"}(c),o&&function(e){const{scale:n,offset:i,selectionEnd:o,selectionStart:s}=t,d=Math.min(s.x,o.x)*n+i.x,l=Math.min(s.y,o.y)*n+i.y,a=Math.abs(o.x-s.x)*n,r=Math.abs(o.y-s.y)*n;e.save(),e.setLineDash([5,3]),e.strokeStyle="white",e.lineWidth=1,e.beginPath(),e.rect(d,l,a,r),e.stroke(),e.restore()}(a),s&&d&&l&&function(e,t,n,i,o){const s=t.x*i+o.x,d=t.y*i+o.y,l=n.x*i+o.x,a=n.y*i+o.y,r=l-s,c=a-d,h=Math.sqrt(r*r+c*c)/3,u=s+r/3,f=d+(c<0?-1:1)*h,p=l-r/3,y=a-(c<0?-1:1)*h;e.beginPath(),e.moveTo(s,d),e.bezierCurveTo(u,f,p,y,l,a),e.strokeStyle="gold",e.stroke()}(c,d,l,t.scale,t.offset)}let E=null;const v=document.getElementById("topCanvas"),b=document.getElementById("mainCanvas"),M=document.getElementById("backgroundCanvas");function P(){null!==E&&cancelAnimationFrame(E);const e=()=>{w(v,b,M),E=requestAnimationFrame(e)};e()}let T={x:0,y:0},S=!1,C={x:0,y:0};function k(e,t,n){const i=Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2);if(0===i)return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));let o=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;o=Math.max(0,Math.min(1,o));const s=t.x+o*(n.x-t.x),d=t.y+o*(n.y-t.y);return Math.sqrt(Math.pow(e.x-s,2)+Math.pow(e.y-d,2))}function L(e,n){const{scale:i,offset:o}=t;let s=!1;const d={x:e*i+o.x,y:n*i+o.y};return r.nodes.forEach((e=>e.selected=!1)),r.edges.forEach((e=>e.selected=!1)),r.edges.forEach((e=>{const t=r.nodes.flatMap((e=>g(e,i,o))).find((t=>t.id===e.start)),n=r.nodes.flatMap((e=>g(e,i,o))).find((t=>t.id===e.end));if(!t||!n)return;const l=n.position.x-t.position.x,a=n.position.y-t.position.y,c=Math.sqrt(l*l+a*a)/3,h={x:t.position.x+l/3,y:t.position.y+(a<0?-1:1)*c},u={x:n.position.x-l/3,y:n.position.y-(a<0?-1:1)*c},f=function(e,t,n,i,o){const s=[];for(let d=0;d<=o;d++){const l=d/o,a=Math.pow(1-l,3)*e.x+3*Math.pow(1-l,2)*l*t.x+3*(1-l)*Math.pow(l,2)*n.x+Math.pow(l,3)*i.x,r=Math.pow(1-l,3)*e.y+3*Math.pow(1-l,2)*l*t.y+3*(1-l)*Math.pow(l,2)*n.y+Math.pow(l,3)*i.y;s.push({x:a,y:r})}return s}(t.position,h,u,n.position,20);for(let t=0;t<f.length-1;t++){if(k(d,f[t],f[t+1])<7*i){s=!0,e.selected=!e.selected;break}}})),s}function O(e,n){const{scale:i,offset:o}=t;let s=!1;return r.nodes.forEach((t=>{g(t,i,o).forEach((t=>{const d=e*i+o.x,l=n*i+o.y,a=d-t.position.x,c=l-t.position.y;if(Math.sqrt(a*a+c*c)<y*i){r.edges.some((e=>e.start===t.id||e.end===t.id))||(s={position:{x:(t.position.x-o.x)/i,y:(t.position.y-o.y)/i},id:t.id},r.nodes.forEach((e=>e.selected=!1)),r.edges.forEach((e=>e.selected=!1)),"output"===t.type?r.edges.filter((e=>e.start===t.id)).forEach((e=>e.selected=!0)):r.edges.filter((e=>e.end===t.id)).forEach((e=>e.selected=!0)))}}))})),s}v.addEventListener("mousedown",(function(e){const{scale:n,offset:a}=t;e.preventDefault(),C.x=e.clientX,C.y=e.clientY,S=!1;const c=(e.clientX-v.offsetLeft-a.x)/n,h=(e.clientY-v.offsetTop-a.y)/n;let u=!1;r.nodes.forEach((t=>{c>=t.position.x&&c<=t.position.x+t.size.width&&h>=t.position.y&&h<=t.position.y+t.size.height&&(u=!0,r.edges.forEach((e=>e.selected=!1)),e.shiftKey?t.selected=!t.selected:t.selected||(r.nodes.forEach((e=>e.selected=!1)),t.selected=!0))}));let f=O(c,h);if(!u&&!f){if(O(c,h))return void P();if(L(c,h))return void P()}var p,y;0!==e.button||e.shiftKey||u||f||(r.nodes.forEach((e=>e.selected=!1)),r.edges.forEach((e=>e.selected=!1)),i(!0),p={x:c,y:h},t.selectionStart=p,o({x:c,y:h})),0!==e.button||e.shiftKey||u||!f||(s(!0),y=f.position,t.joinStart=y,l(f.id),d({x:c,y:h})),(2===e.button||0===e.button&&e.ctrlKey)&&(T.x=e.clientX-a.x,T.y=e.clientY-a.y,S=!0),P()})),v.addEventListener("mousemove",Y((function(e){const{scale:i,offset:s,isSelecting:l,isJoining:a}=t;if(1===e.buttons&&!S){const t=(e.clientX-C.x)/i,n=(e.clientY-C.y)/i;(Math.abs(t)>5||Math.abs(n)>5)&&(r.nodes.forEach((e=>{e.selected&&(e.position.x+=t,e.position.y+=n)})),C.x=e.clientX,C.y=e.clientY,P())}if(2===e.buttons||1===e.buttons&&e.ctrlKey){n({x:e.clientX-T.x,y:e.clientY-T.y}),P()}if(l){o({x:(e.clientX-v.offsetLeft-s.x)/i,y:(e.clientY-v.offsetTop-s.y)/i}),P()}if(a){d({x:(e.clientX-v.offsetLeft-s.x)/i,y:(e.clientY-v.offsetTop-s.y)/i}),P()}}),16.67)),v.addEventListener("mouseup",(function(e){const{scale:n,offset:o,isSelecting:d,selectionEnd:c,selectionStart:h,isJoining:u,joinEnd:p}=t;if(S=!1,d){const e={x:h.x*n+o.x,y:h.y*n+o.y},t={x:c.x*n+o.x,y:c.y*n+o.y},s={left:Math.min(e.x,t.x),right:Math.max(e.x,t.x),top:Math.min(e.y,t.y),bottom:Math.max(e.y,t.y)};r.nodes.forEach((e=>{const t=e.position.x*n+o.x,i=e.position.y*n+o.y,d=e.size.width*n,l=e.size.height*n;t+d>s.left&&t<s.right&&i+l>s.top&&i<s.bottom&&(e.selected=!0)})),i(!1)}if(u){const e=O(p.x,p.y);e?a(e.id):(l(null),a(null)),e&&null!==t.joinStartId&&null!==t.joinEndId&&t.joinStartId!==t.joinEndId&&r.edges.push({start:t.joinStartId,end:t.joinEndId,selected:!0}),s(!1)}f(),P()})),v.addEventListener("contextmenu",(function(e){e.preventDefault()})),document.addEventListener("keydown",(function(e){if("Delete"===e.key||"Backspace"===e.key){const e=document.activeElement,t=null==e?void 0:e.tagName.toLowerCase();if("input"!==t&&"textarea"!==t){let e=!1;r.nodes.some((e=>e.selected))&&(r.nodes=r.nodes.filter((e=>!e.selected)),e=!0),e||(r.edges=r.edges.filter((e=>!e.selected))),f(),P()}}"z"!==e.key&&"Z"!==e.key||!e.ctrlKey&&!e.metaKey?"y"!==e.key&&"Y"!==e.key||!e.ctrlKey&&!e.metaKey||(e.preventDefault(),p(),P()):(e.preventDefault(),e.shiftKey?p():h>0&&(h--,r=JSON.parse(c[h])),P())}));const z=Y((function(e){const{scale:i,offset:o}=t;e.preventDefault();const s=e.clientX-v.getBoundingClientRect().left,d=e.clientY-v.getBoundingClientRect().top,l=-1*e.deltaY/50,a=Math.exp(.05*l),r=Math.min(Math.max(i*a,.6),2);n({x:(o.x-s)*(r/i)+s,y:(o.y-d)*(r/i)+d}),function(e){t.scale=e}(r),P()}),16.67);function I(){v.width=window.innerWidth,v.height=window.innerHeight,b.width=window.innerWidth,b.height=window.innerHeight,M.width=window.innerWidth,M.height=window.innerHeight,P()}v.addEventListener("wheel",z),document.addEventListener("dataChanged",(()=>{P()}));const j=Y(I,16.67);function Y(e,t){let n=!1;return(...i)=>{n||(e(...i),n=!0,setTimeout((()=>{n=!1}),t))}}return window.addEventListener("resize",j),I(),P(),e.drawNow=P,e.stopDrawing=function(){null!==E&&(cancelAnimationFrame(E),E=null)},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=builder.min.js.map
